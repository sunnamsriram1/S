#!/bin/bash
echo -n "ðŸ”‘ Enter password: "
read -s input
echo

# Generate key using Python with safe input pass
key=$(python3 -c "import base64, sys; print(base64.urlsafe_b64encode(sys.argv[1].ljust(32, '0')[:32].encode()).decode())" "$input")

# Try decrypting using Python
tmp_file=$(mktemp)
if ! python3 -c "from cryptography.fernet import Fernet; import sys; print(Fernet(sys.argv[1].encode()).decrypt(b'gAAAAABoe_CAuw8CsTSDpvNaixvApdeeboPfq2Ugso_0tOfVl2dyxOrYJ--zeZcT59s8Nq0ibPu9ol0mIkp2yeId4ck0fIzfqOfV4KYjGKGKSeIu-I_5srMxBc854sQmNGnaFkKscjX31ISUIgDObQg2qjBoXQYdqmvQ0SwPSRekrx7mVgBWX_G-UZ1j_CgVRe8b9-hl2J-i10cfkvocBH_KEne_2uwsEbqgITIvS3YgLfl2Ps9d942spnRF1u-wpQHw6l1llAzuo3TLTMfL3BZyT1Fu1MsJDuPhgxdYP-1F76J4iFZbed-c1jKYECl6EmX1pJnFkZL7Jc78_e0xDBPNpNG6LjAgBJXxjVH3TA7Er6oV3hxR4-qJ3VmYeznawJ3IxoWD5SnMloCJIuK92O1v6FfapJl-JjuBokS_mOp0RcG4mXgCf7O8mx5tmsPtukUBtUMJU3FuKcqK79SDgdvmWQVtf7dvHcUKHKvV69rA8RGQwiDHe4Td7JFEeORWVE7iJpkkPWBOVezsSVEXKwpzdljyPDu7C0QCQ2W0Djd0wfjJN7Shdit5nFpxKflKWvfmWn-X_2I26VCyoPNRIKv3RDHh9d4haldKmkVsQ2OVXujBzCUdAnU0fQkmOnJdk69oLnDgtH2ImJlvuwLPF9yfH4q1cXE5L7NYVqQmPtkkpEoaMuFFwkWs62ik-iS-fdiGaWfjcnLTfjruuDz2PjovwnitOLxMzgiISkxmJTAYVcfvwC6OhlfGPv8ixk6hAOkEyNm3Az_wNxBl30ShJInez7VsAYC6jJiFQnDTeyaNyn2yNvYPmAKMqMwpDoN2djEPGUX0K5Taf3JWC8SE5neNKdyyfQ3OpEtM_dr4FYQhfMKpVrwPLBAuSux2oju6-Y4puM7AXKwYPQgnTg1Cp_1QDi05mtLgYdBvV4jTrSyoBYwlWPgKspo1PsJLJCZaX5LP9_Y_laqHpiDsJQjzS7SLE6cfys4Cn2eu2xKkjHQ-p8tdw8qiucu1ZNTgmCqlWKNLKZ8N5EjCqnJVlCsZFltCXxmHVvAHK6cj7xx1BUbstSbiAO_F5dMvCnlGt6RRHqVKi4rwtO7Xq1S5_JAxTAPEdFQKv7b8IeK74X4RhoQtkX-uPfHIn7YKCUDuafeq2Ozfi3LtS2Am1MYqwDDrud2HDq60UFI4zCvBUZYH4YIkwRsZ0oCDNbNMKxzAlUa6NnQwuQtplq35lKd73BbR10G8gVl8jVe7bQpjdqDk5oKVhDft1ikgQVx7pY2IKoXD1__jw1uByjIi1zH2qiDQMRf0H0dQbutg9E4evSmjgFhK37BlMKVcYNfbGzD0997Kc3-Kxo8L2UIb70gEPTdbaSfmaXL9v_BSinaJkKGzIr0pJZM_q4oPcSSqI0UAjY7b_Zetp1SfnxwsPS9MoDoMlPesuHckHppXkVEjJhkMXVpL_t1nfTkdGUzh6KTLrIlpn2wEmsAFcVUUkwI05hw8zEuWR6jPHpDJGcCqvAG13CuqLU6O6Eroa_MFkTZ6ddVNgZmQc5NFsWh4yPdoCKK_vFG81MBQAjmg7NhMjqd8-ed5xsQaKFAoOLXiN2xe9yykGGCPeN8-u3xYGWhO-3pZt3NGX3IZtMpcm2W86IdUb4TqUTLlQWWQUnM9XEEBzUGiV7IqsmmknAY5t0dh7XcBJRsy-Z7qquywXf4cusv2cOk9r6yrLgQCiRz-zWxddgAkKGcI3AC1Tffr-1AC0IKK3QoORzgN1NOU2AlJhmaOq04t6zSzBBG2yiTMTSkq9jlLXaorB6mNw2E197UzsiCuPd0qJG5hUyR3TRYP2siMwClyrLjt-RHFAhWGoYgbqTmDQHs1MjfXNG26Ni9VSk3cleXIpDGUyV22MmwukrxFkI1XRSk_bYtiwG54Ig0TOzQ_RgVRR18N6rea1-w7Yg8_EFg1aUuOwCDKpk9oU4sbJEiTlehBJS_tiO70adIjCbUvwSaccCBhuG8wZoPc2Qj3OhJbqlmsrw2XEstJGLk4csnpRhjhNUJRDMqBMUf4mOefVHSSSPL6qrRKLi1rX_TtAbhhdrw3j9Eed5ixVw0xXBunUBnoeBxCepV4I53GeyTAHK4BH69PO0azRDwBFXOUt5uBXI62mlEs3eknGivNucavGGJcx7hnJiwDtV1oUXei8ydt_Voyce5xcmh56gNy2DE336XYOGiaeLH7P2De_WUBTaRBgaCdeqHYVntI4j_nr43fsqX_miowVj9EYgSBcaqdn1gRbQxxKs02j155A6WrWKBQzpFfW1rkeTn4g3rKtk0aoTSMDbCe4fLhQ6r5TcrOLpRkgXXXHtwfqT4T04WECX7Wv_-_upKdGaA-0nPiZulv1odGfvWF9cWSYOM-NFAnwoxL6vq6xcexbDNnjSuA4MfvTCAMUqp6Xrh2GsRu2i41mkj3hnmdzoivr0GTKbTc_-Wb_D0U91D-XaEdTHBuHtPVHzkF6xE5eIZfYwHeTSyjYNzG2mWlSM_c7g_D6Fa_iXBuMzlerFYyVR2CBxTIyFVl1Irz47nh1taA5b6a_yEX4XLAKntuQPtaEgVwN4PftleTeBdBX0vN66ebm0lnzsULAjlwQL_JelHHkSurZNvOZU-wwyHVfAQJl0-cTdE3f7FW0FR-MbwJoSxugcvY22gC2rXp6J5KMtM3QafFDNATFTPicMELnvOv_VAcQtkpy3fifkLiQh-MAr0o6r9KvLifbJQ4zQI1ythP4rGJMJgd9DjjXyCmjs9jNJRyfdePI04fnrJSiioySzCfQNTnxmkDLDdJsFXHB557d-5HRw0ihv43w3lVcu32SZPO-xRR7cxoMR4SlWCHXOi9bFtHYqP6opbpwqIPL7Z1kN9ZPO0xtW1Kmcw7H5cOBM5XXNDJxtxAGo3XANBsTewY47OFMl_pT6dDvsRNfFAK1GuSiJuZFVBtM-j9-ejV2p7820D5dWNBIBVU76Y00eLDCeJ0nKkgohMi4LKJDWWqewW6Nv-p0HcthXz1b1qKjrTGx8m7EJ6T7_I6vcSp_VcMKbt0uX0PLYOiAMNkldWiKLcajDx05IJvAXD-ycG4NfvZFXqNqp3vv54-IC5OHbVirq0s0xKkPCNWHv8l4HaQlnzOukbqt8mdwL9Fg2TUxh0XDNPrwadpRB5YMTlID6cuoCsb15buw6KgTaOFXa8PwieizopaeVOs4bfmMhzYsNj4AyiG0mCV_w6uCzP6QMrMc7BbGY5LB7gqYSc932QTd3WSRIkqumfUL1DdumnfGINiQKa58obe2PYEqpnZO5O3EhV9OiVCujwMRdA69Y3lPywejR17Rifepn3kkJeYkJXmpPxz3lfYAmfMMQc82XyUbftnvSntw-VjKznxyeVvLLFjlkryQLf5yVTcV907kqkiz-khWfjyP1NiOu1flNISUCYY86rWzkaApHe0H77abqzy6qxz3gfs_TzTuN65IVSOTX5ftVel02PABpTFcMYkYTQRzSNvCVuW-dTCp8QSVHPy11d0GTefaa7k6tYJoj5FNAm2783yEDpK2d7-XMfyBrD6OHzoV61irlxg5Iz1jQGh4mJCFq5HjwpHNYDyw7kkS8nhxqbcYAr2xcmsumbTbp40rEfFGGVvmtAN2JQhY9ID2t-9UngQE3setIDjDnlaOVpM2CzElroCs4swWg-nxEB2kLQdFIqa0Bfr8OJE6Fa_7jJz4XjORNoRCyVm17obB9Q-3ikRJ5k8rjWgYNEtp2XDkZrY-x7E-DR2wwg6g_adLivKk-1qKDEp693CVzuEotWMcIcwGHjpfrS3KOuTwaGqglT0JP9Rmr2_HzQyL0QOo6hTNKOBsfji188YYXxfsWb8iXcO7hgdQ8zvGqvdaM0KSPBX940kD20eLXFrrNTsLNoPeRDNqrzsJgPqWRGNeHty82Z7SmpXHVbKkUbHjU1stnkLvEbchhBAuZublUK2PAisrpHp9wVfR-2g_fCQ1Ql5J1AypdFDVLd5BKlDp6_H8zwQMBL3op8G0ppvye4-_X2DRtWLHnaizdGaTgLD_RlgBt3raoBLxfYBpwLe3kM2HBUZgJYmtCKUjPtnI4TTTg8_dcw7Q6a4Holi2uMo-wc99rNaDCLj-H7pIrJHKWTCg26xLxfwlaCywtwBDbh7MKVEf_fSM1LLgpBqaB8VY2WIAkN0obRqxQJPg5edraVivVMH_O0FHQ-oKOVgBkDZuPu323YP4tOM1utzy_G4VkuvFW-lXh5okVWzcHOQZb2P3lTIlppieo1ScFCu3DufqQV7sB-sN3ejWtoVfYEOjFPsLLIlVkPlIiy2YDAJgQwNgAO-5DK0fv5BELi6Cusv3rGm48NBccs1qqwr2BKlZT8a9fykDbk5BaQx6aOxtaeha6U5MdCFwbKmHj9WALtq5DmduTIZrnm4oUCPGUiSnjrNx9u6133N5g5_6rETmjHgkmNHSqpr4vn9-HXBLE1_b8vESwKDKVPECTYfWMMEfnVNChNVtVNPJjMxbRa7gkuz-XaKNvWUG0-Lt9XcUQ_4WlTt4e6gfVCcTZJrYbGskb1oU58b4J59fkxeTOh7174PCWW4vSFq9tWoHyEuQJCFfuJx2GVXgX-8iVuM5ZxH2acnqcVQqmQIDmrneTeFWQCW6b6zHuwUTgnkMyR0dJvB1C2EmilM454isOYT6paVG_kSzQj6V2cD6w57FvcepBebOjRj90DP3qXDiRlmeohKGrnyvrrjwQU5EuiIlLmGZww93ovmJdSCRvyM8TA6AF8DIfcbD_Fx_dsreBzOZGWjVGHR8omPIgod15UTkYvADAyp6vQN71onC0g7vC95Vo-Ng4g9s2VJ84q1oPitKHj71LVJ9wSqXbIrNOxOJwJzOuHB5exzoA6AMNz86XTxr_XyBSHba7pj6_nkbJ8eJ9r1FV8RxwrPQBHjyvmGFOXGb0nVuzf73DgzD_xddvQDmAcu9TPG8S7FY106WSmv6OgrtwnFlohIbXc_QUd9RS7HbKEMQNCRqTXvRfSn-d-5KGHyjpEfph7k__InThG31L6emyX7khNijK0XguisLLlFj9K1HPgRG9xrr1C5YYjOeD8yrQPLRAQsIQd_gnMkGqgzFeKVJPEyGyLeSf7Kh0W3u-daiNnoSr8p_4JUn1YX0mVDaEL__BthyhRvvGsR9XsZkS_bA68votMlN7cSvRLTk6ZW2BaIATi9tpPAleeHl0TVhw5gfW_mXWDbGJZ1bBi_ODQrnOBXsQL9lQwxXAB8yXbCItI2h9v00ApF7ZqSun7D1gDYppLQkL3O5tra8HaXMaLND_yNy2IhbFS8SvLfqmKvck_gCIwHW0a59SBMAX6B--KyggN3GryKBOeZrKD89QrxsWf5xgjikeJ8SIW8lI9NIKQV_vVH_206aE0adYZ4rml9sTlTNsfmnMdFBiZG7SYzgLMJ_gqXFdi_Kg2qnJH8NguvH2NauQ==').decode())" "$key" > $tmp_file 2>/dev/null; then
    echo "âŒ Incorrect password or decryption failed!"
    exit 1
fi

echo '# ðŸ” Encrypted & coded by Sriram' >> $tmp_file
chmod +x $tmp_file
bash $tmp_file
rm $tmp_file
