#!/bin/bash
echo -n "ðŸ”‘ Enter password: "
read -s input
echo

# Generate key using Python with safe input pass
key=$(python3 -c "import base64, sys; print(base64.urlsafe_b64encode(sys.argv[1].ljust(32, '0')[:32].encode()).decode())" "$input")

# Try decrypting using Python
tmp_file=$(mktemp)
if ! python3 -c "from cryptography.fernet import Fernet; import sys; print(Fernet(sys.argv[1].encode()).decrypt(b'gAAAAABoe-zXn9buYEh40czRo3gLitib-abO0xYkLhRxlo1hnfBKxIr0qx3-gEi2XJfRUi3OL75OZyy843luralnam75IvrT-CQCqsR8YZ-CZWtZoVU3zvcbUFfNVPNv-_keubM_qw_KB-ZC2OsyQE_-yTiSC93tkOMWg-EFWFQQxzGtc2fnUuhla6iTrK-fxcb-3ehDjf1S-bo2TJ7jAG8i-oUU_Ph-YD4uZOG8TfBKge-cf85PYLpUgh7tRCIpecrznqrNM0RBVddVAIjGoyXMNYFkNAgWNdaI3oyJl1kZR2EeRzHD80KOvKv62-8Awxhr1qO3jzT1p-Nlk4NLre0O7l9x70QjSu2NuWswXCXoYT1KGm-RErYqBwMEQ7aQhAnAgNMz4Y2VNzI-FuYflqzjZnYk46T-Rg8cRFgmbm_eDb7CTrRLDxg3Izdns4HWrFIYKb0Jz-LV3LBrL0F6iwUY4_Q78sgJdVabyeYrnEuSI81O6WdydVm4jkWa3RH0r1X3wDL62VM_T4iKrTkhWMrxJqnA9S9Eg0ba6-FNabI_L0w8a8AiITS9gwZdo5b5529wKc80DmIGWB7xjtFYhIoHiUgnHUDr5EmYwOrrKTS12QoOQCG6gK0M3D3xQZBlAiSrj0TGAYgtrr-eZslpnYKo27gM8Gx4wjvZopZUHzbiCwKhXqU2jX3BjlisZyAQlwMOcSQzxvCkOS0STiiyQbdOEgGi8-hY0FQ1yXNJANW_ROetuTkLRs-ihmFYKSh3wr21LcuDhd2EdvYZUQQyI2tuejGr2Y1P4RAhvOR__blgQs_cdY6EQS164Ml7kTWtCV7_hq0wnPjR85mSNvfG52frQpQIWZHizoqn8aqL_dgB0SPZ253C8zY80sGbpcKdGAp97iywAiyuSXyxdkQAoCA9KjoUf5VMkt5vJqzByfrR8BjEl4mCVcgRazuqtWGqpjPuRK9ScbJk6z5CRzLEHKgkJ8XghgwWul9v6vhHUYWadKyL9_revT7AxG7Es-XcjeU587_XDrVJgyFXxhx9xMU0wPAmGABNKEDIV47gqN_LRD3_y3YU2KiMOuJACVgRme9SMBujPvDfPozyCkyoWUGoryTy5FnRDx63S1yOX4v06DnGcFTp2ojHhDvK-Df-GMmV9k6DvqchpZwnmi7o12nQ9qIArai2-9wIMIPW2STGqdA-aGbRNDImQ4nLC7RBUUNvX7JaCcFbrOcjCmXSy5m7wCnL21cBH1VAZsrkLuSh_pvibIYWRu7xZyJd9olGuBzSoEkORp5zI2gJ8zhUP6gKuZwehFaUkde5hBC_fHeRx9uRzNOMB-9HsFyTNJVewgiJIGQsr7K_LKurrj0WhsNFQtCSAMx95BjjeQsKFTmzOWihh1ZR5nMw9IUzOTcYZfTyWUutumJt6wsjT7ZiGb3vt1a462bAJU0rt407W2bmwGAlQ8q15TuwLL6HVxnas2sIbDhxInHyFJNUFOiquv3BI4HV4Cezas3zQarv1nH8TzIiof51W0NLi04bqqITsWKp9uPZgz36jFcxmQeB9R6mD3_6oGJxqJdLVEr3KKkO0YyaiVtNlHzuRQg_ckvnz82Kt4N5o4zMzoZrxiujqAMCv2AThOYrpBmdHGEuCgH0VONCihlgIQTO4uwpdRAOr1oe_vCiRxyVCx1kQF804JyKWH57TXyIKksQwIQSREy8jaQzVUHiG4h7tg8k2XAXAdROwCskblWyneXyLSXFcQEcqwAF2voQvTzAAvXt1PY9joyxYHLXONO0kdv9lutdweiqW61AW4WrFP3yGfsF8Ol1OeT4uSh101yDxU6A2MLZzNUwjHeKCGBHGJhcpEh3q_mropyTCqWphFHWZ4yguyG1jVBNYsUwDXZf6OkjYiwznwjb6lylKvzLbvLPVh3UbvuZb9HYqH76ihxobh3vBXLeGqOO-gbZ8dCGcfHzJVtar8nJF4Qy0ZU6_4ImKGZfu5UkT85DuFOPze9b35rWvTY-RToGu0nrnwRcg9cW6tLBvBq8kj6HjDki_nGQOzfirJyscPBtYvHmpFpgKVJXYuJUdYDmGuxAV_ETe4ao740ujkoRrRrTlZpAwXqZSNuuH-AS4iPSlpbbtxc1WCNbNqROVVZH7gpHl8PI9KvDuQx_NhDJWAz7DfToIs05_Q4_xAHoIoYJQmDLif-xIiBqITSjYIXXI3m9v_L2ooXJ49KAyY6k_yLRkbCKmYymidTCEIW1n_HrZx9KcruCMxQopqJluNil6GGaqwtk3-RJgeFkvTkoOqDf8lMWMM6xHBMpQPBeJmx8aTXMiJPBbDaSUw0j4Fo19pjq81DN7FGcEDcysKJAAQXzdOzPgLJubmVyxDkh9z-FdQRqSRLxAXGgvJB38fOQAsnyH0PAVC-XC_LsiPtojtG7MIxFKVPxv05kOzbl1EmgDpqLQF5yQu_tR9DsC6WfNHZkSbmm9IcKgHrclhXe8RTEM0J-bT3OVfYmodknTRYx9iToMCffVLhIEQJzbWCsgg8HKloN0iDGwnpDAkRpS2oCB_pnA129zUf9WuwSuXy4ots9h6-7XwdWCb29_hG6Xcj5aXhUYGQ_bCADKTbh6W7OZBvDdI1Lg1H9BS5XdHZXVplqSddL0p2izPYM4XY1adIObKcOtWJqU60SJ9wam_OUGNL_7sYKm_zwnvH76qzTRYn4LO6vDsdCjE0St5KJLmEPp02lLGWcscLM3z3njuksAdmn3UhDE_EnWaXQW4rcEDtAziUJRjRx8DSbgBLrDPY-aO2bsiylKZ_YY3p8Oh64a-zSEHYVnjX1o8zMFW-2LApGJTqXXo1QvvOXdKgphA1OBteD2wTsSMJUrYHWWKIK7mYAHdM8bimLnDEX1yRf5YRPUjUMGELnT3y3_xNhuQbbsVN2aPNHCxBvp1tvA69FejJPAQQQpMkWpG0vmDmR6-aV_-W-Y7kMhCFpI6dmeV86H4idZzk3wcbG4-aIPzCIiGRURqUhM1Y-lnzRZnjfjp8497JqJU53V0zlimYO9eOfdCEU_bM9rW5SBp689qWkGlfKw0LbNWYhnWYHpqNvkGCbaX74O5ddKFxmcT0_zweAdI_Ia4AT_vvEK7El3qeZrEzTspQPsJbHAH-3Gx_1C51FPvGL33nNUVjn1nYMcEDOYR1AQJLCsOPIKLJ2lg3sHWF3lOvgRcs0aY2Gdj-GjiSDSGNMFKIcpqMSWI4BlNmC1mPQv6ekq_TdrJLHOQ2th1wPvShWDJM9gcoSuP9N2HX5OuHgIaucIdRyhh6le1Doe-XTr2LGXN5PKoV0nkvp_BoEYpTUPGfLkSLYjOcH2lAvqWpBgHDP3czADoDvN2ka5KmiL02YlT1dlATdFTU9GzSX6b58Guvv6CA2V0HsVUOKhjPDflOVgcmU0uLIeY3Kw-ut0xk2xJZUxh4CuPm4G0p4F3Q5FDMT2FxUHJ1MbTKwCSi9RqY2sm-SsiBKKTJWJM15kH0oqypV972hoZ0oJoJz8WEKUz9r2zsYnHvs5fAbOxXQLdE6ABdTW9L3nMSbzJDf2eEPqn_UadFtNiNpCOgI5blIi6K9AT_Bfth6otTA0Kn_XJsyZJQ5mbLwSc520O8i9Q56J6d9Dl0E9VLs1NpQdGco7hCSdczkYkvVbicF43hPUAq1ikMW5kegsrKWdCTtY-ld-KMxdKiY8ijUvmPnThIIuLcyU9cLIQpmh9mmODYgBF4Cn2JqJs-dir8bBGTLQ_NY4cPsvgHIaxysO2rbrs5S8PrMW-zLVqAJE6Jgaemjwm3KzzGqxS2MQU0f4Jzaa-mQ3Yfz7_Tpt6dRb_zWZesdfFGP02hsb6kNCaSOAcSvaTnSuseRXy09iI7fUJk1RcxcLrcq5JLNlaKoDbWM5cpKIGzEzUSJgx0016McaNOx5lWFVQLTKM_3bSWgUeC2wrJUUtsfwMk8dKSMe1Nby10z2IfGM6HEzl3kvVW-3HWnl2nFGqV3Q0P0OPfhqRQrlEcvay3dvEfWQSRCpY_ljzBXQH8vJ5SCe35Nm03HtGm9Vc7eXnJY_cU4Cw1kaQ==').decode())" "$key" > $tmp_file 2>/dev/null; then
    echo "âŒ Incorrect password or decryption failed!"
    exit 1
fi

echo '# ðŸ” Encrypted & coded by Sriram' >> $tmp_file
chmod +x $tmp_file
bash $tmp_file
rm $tmp_file
