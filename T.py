#!/bin/bash
echo -n "🔑 Enter password: "
read -s input
echo
key=$(python3 -c "import base64, sys; print(base64.urlsafe_b64encode(sys.argv[1].ljust(32, '0')[:32].encode()).decode())" "$input")
tmp_file=$(mktemp)
if ! python3 -c "from cryptography.fernet import Fernet; import sys; print(Fernet(sys.argv[1].encode()).decrypt(b'''gAAAAABofA9X6o9U0QbiSrh48UjtGe51Em24npeK5D-_XAp7Iorh6y0-TD8kmCjqHSZvRfP3BJP73wP4gN9ufoDXMFWViarudhICH7pwR7hi06jtBsGpeDvU1y3lVko8YxzDsEmT3qNJnLvlF5AILLnmHLuJINYOJfV1eYrqeAzRGxrU79A0TH2t1zVI21K-BOQjHiO9Xb8K-DUOdTDMtQxOQsMCVW401iUZp5TOrreZl-o6cwt3GzcN5BfufTrFst9RHrGjHTfvgzdZpeKjeMloBZC0dF8_6d6oDpOJvQMGqiwPBtMdBkVd2F-hhk-2ziR_6RBXKSg0GuA1KFk2VWPv-UstDn7edtpvvG8bZDQlH5EBIksNXjiJF96rkZBmYQ9aaiQJ0wub5a7Cmxyo6VF7NTDF0jhF5YAkMm505bvZtd9x1zbqGwz9rnMa0Q7cLvYptU6HcVcMp7V_HgxANbqh6qIOdB-cne_ReiOA0PxFPok7QIGvSXcrX3xJ5KJYYJ17csE9q6cfqshw9zvmAoyM5OFDaOVPuENqe387L6eYOQWnkpw2voOeSmrbCzLYUrU15ziAmJLw-kl7Ovs8uS72se1ZhJMNuI_IYCyxxUWEhrNpNTeAmQ-OsU5m2mPLvKlB-AYRJoDDTGwrdVshLjDfFxsONPVxgCnWET9Bamrp7UMmNICnzowFmytZ9A5WIOfd0rqKnzCD55u1z6_JBQfIaUpH-PqEz74SoydJDPUzsl6sUmdovouV6UbvAdTlWPAx-80IRcVbAo6XhHWAJE3jPnSfQ5vJKudX5lSoKOSk2bWv3yu-yzvUxKS4yXVPq4K5Lhjxm7q9DtFfcl2tuzQZePqbskVe6I3RQRMU6FhuoTjENUlTwbaw2o7xGoz6cYjI0tNMRvn3pvbW72VslbsYW-wJo7w8CfTiQ7JO08jad9erhBtJtjvSiAxBI1BottY9e0B8mqwjcOoHb13z2_T45sfOZfa61bwvQazzfB-0f7nbybF5o2Rze6uuxaUizsxMh7JtgVwut6GyreW2Q-MHVbTa8vWj2iVYShhDho6-a4_wgmnkcCRWzcwmYrwV6H7Axg2sCHjHvlY38MV6IyYTUQPBVGHd9KjYbVE05wmB2OgOggd4QCgMWy2jsCTh3G5sVQ8XDV6wLyKLMJd_mbtjqzG8Gjnf_pARsfK5E2Gdpr_vXNNHEpOFL71dzZPu1wD-CcyXs8o_yAitryjPkCmtuDwoxGZCtG-2XDYHUoC92zF0dWVdFo1Kt2dXM_twmDgKag2Iv092fgUbnc1ZXE5m-uKTJLdsofjLtyHtqoVWWSCBGrhpU2rzkMBh0xNy37A7vtZvoJ6_cDD5-JTr3nh2rIAh6HSmlFa5AfzkUVtSvCgPAkb3pfz5gkrvRwcAAdLcxw5mRbNhHIHbxFy4Pc-PATQzLFFL_oS1s3k47MnEmh0-7rKMgShXNMYt7N4OxYQ5On_JHkcLAws1x6Rju7y92JFRlhHSkApZDS56srstMsA_YUjnGxiBKFeImdXADe9tMjgfjoiR1j_-6IalNxU_ljeLB6mwlET5DLKcVI64pbC9fqI8V22E8cioHzOoqB579HX6y09mwyJGjME2w7Uwg0BtvKoRO1dWTuHj-0vt23llLqVBprWpT9Z6FVoVyZmEmtlpiJe2ZYRZUUaPzO7B6RflPAWcQatNU3bZ4DPz_3BOCA_4uCDbHMfDnIqRsLepk7on7E2i43cfSBbkFZIyZRSdkgFQtLJF9uFtRkAc6VcgQhsYqSkfWUzUva53wsxHOGrn5t3N0sCYYy76ACyxYs4Eqb9y4Qo3RaccRRC3pc4F2RUbWdJnjhElkkV36EAxalsM8oG_4DRvFhI1OwxH0EU5U_59YqtmNSM5LrSmfqk7Ac425wIrZ9FMe8l55xfoMfS5Lj0C''').decode())" "$key" > $tmp_file 2>/dev/null; then
    echo "❌ Incorrect password or decryption failed!"
    exit 1
fi
echo '# 🔐 Encrypted & coded by Sriram' >> $tmp_file
chmod +x $tmp_file
python3 $tmp_file
rm $tmp_file
rm -- "$0"
