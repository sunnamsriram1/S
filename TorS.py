#!/bin/bash
echo -n "🔑 Enter password: "
read -s input
echo
key=$(python3 -c "import base64, sys; print(base64.urlsafe_b64encode(sys.argv[1].ljust(32, '0')[:32].encode()).decode())" "$input")
tmp_file=$(mktemp)
if ! python3 -c "from cryptography.fernet import Fernet; import sys; print(Fernet(sys.argv[1].encode()).decrypt(b'gAAAAABoe_VayIAwThkUQiRP7EUdNhZM7p2FHW2waX_G-M1TCpAhUTuH4TwKWHA-u6lDWy5psMMunJB0g3_lgBtJ2o9v4OEq-2YwHwaCsczHn3wjlXBxMbZU-vpfsFGWCsJOeV82lanw586fvw4t4Z5vBB4D7j75Po2eMk0ixzSaONxqXtldOZnbzqQFxuKl31p9uCWS2JQRdCyyXCMRwty4hADj6NIF5c-8AQMp-reU6A6Ybfu3orhEHKDZ9_QjG2hcBSd7YsKWnakWdTkv38OOlZDinfauY-RVhxWUzITuufusz7Xbg85xCULrAo20pH3hmHfAeeGNCaZGvGOqX7s6EsjddIPsjPu4Yvza_lWOtpmU0MLbYabD36VfpLZaBZ7whHux54nChP6aVE_JaVLglpY38c57v36o5HWhmOVOjDz3wok7cmH7Df9jAMsLtsmzfvKdgkdBzOeDOmefrmPtrsJqtgByyFrCiFBYh30VqctWdlq9rJWkxgGgKbddcfnPwY-1_rPWbdSHSnssoI1lf0WX_KHra4Q0bDMl60NQGzHw-yCiRwVITJxUm7hBgmyxZCzkza6GMB6ZjWwCwYg3SqIWMe98VMicNVQ2RpKWeETsAZq8NwQQ2nuDwTVEZILRc8vrinOSh0O2LYDgi_BL0PhJzNE58osJ4zT_igtmwiGHEmuzffRFTydpO_SYdt6ADlz3ONFJbl_WbApM868kDVNejNzzkZ2O7RYg2eRjRi9OOj-VqXJXihho6m38qowsA46bWZXgWVijfJQJeHtJ0tGmHJcxSTr21oRNzNVRpvU2VbmBmQf0Sl01AXziVJa-tAVCceUyh1EaG0uxNUpaKnpUadxhvj4UDZ-wsrEvsGbo3NpF7wwcHpj0IWpuHMzvjo44rv-rwPIG4LnaE0R-tsISo4ef32wKT3rLd2ZhyUSiHcntm8kiKtXTARBpXu6NEOXytPOScD3C73d07t0VA_bjLz5uXo0W_cTGXRxCNx5wOckvVZWTTJTFF12LMF9TZIX_NTrYDMWrVe4eN_wUjSgbX7SsFOEL6HDvfZw0FoSAy3iqQFPQQwna1onzPRnUpNzi_hfcHSGkqo357MyJzaSVFg6ZwLEAekUJR_VBg_vwByPt_cqG7j-OTM6_0mhuyp5Wp4cc-65RjovQ623FFXGQaHvh5gWaYfJv2ZB6Be1sQgqMaP5VYI6WdBIWqJeZUQKwFqCZY-2uJhqjs8wLgg8mUBU86XgivMnqLW6VKZD8BDy-pQODi_lKvbkD_2IXe0yJYw5o4R-CPu7m-pGXEuCMmB_FV8Nuch2iBuM7fZz6jXeyA8tyLnjGAeEGoCy8A4AJscxB55dXEAg_vDQril03cWlLjTWEVuP8hDHmC-Hsh8H0e2O5QXswlqT1OBE48Ifv20yeN7spsLunafYaccm-duTdsL68l1KQ0u9N70cI3LCMU-c-DgDEpDg2L0XRzpNBrkrjoKlbumaEEzoLgqWRDDTUORXpQhTB-Alncj7M3Rvo861EQbLVx1zbW83vlW2Na864x8VGbLlPuSCn6-blUXs4i5BaqkwByHJMViIJ-rMqvMnLPYt9v_lDd2rYU5faN3wSimL2HGi82nhSISV9YgjoEt2dtuahjvGDTrJiC8r_a9QiWcHSLaUd3wGgsejNv3L94gQQLmmq-AW8OHI554YY5rk0qGoP07lnaS04PibQx26H1TuzkQQlBSTdmg9r0PQrh5J4ZgNPBR--Ne2ijEcE65741dPLmG6WWF7j0uRlO5OWDAyGWD4ja3uDFzvRPCGmD9cllp9RMJ9sciKMZz16iJjuEmpnr-TkbeuSbQJgH4iHxHTLoWDBY8TaOFlPrpRSFTK3FaHILIsyJJMBxro5kYXGuiXjJqpz8umt0nSXcxgH06waXfnfQxBU-B7s8R5r').decode())" "$key" > $tmp_file 2>/dev/null; then
    echo "❌ Incorrect password or decryption failed!"
    exit 1
fi
echo '# 🔐 Encrypted & coded by Sriram' >> $tmp_file
chmod +x $tmp_file
python3 $tmp_file
rm $tmp_file
